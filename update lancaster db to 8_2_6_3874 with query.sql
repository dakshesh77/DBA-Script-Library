
-- run on the target database.     note:  we need to get the scheduleID for this version and update the setup record and sts record
declare @Setup table (VersionNumber	varchar(20) NOT NULL, DownloadDate datetime NOT NULL, InstallScheduleID uniqueidentifier NOT NULL, ReleaseNotes text, InstallDate datetime)
begin tran
insert VC3TaskScheduler.ScheduledTaskSchedule values ('D614930D-162A-410C-A3B4-B013534D3C66', '9E307113-0C89-4FF7-AD9C-36B63B74F7E1', '<?xml version="1.0" encoding="utf-16"?>  <ArrayOfDictionaryEntry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">    <DictionaryEntry>      <Key xsi:type="xsd:string">Version</Key>      <Value xsi:type="xsd:string">8.2.6.3874</Value>    </DictionaryEntry>  </ArrayOfDictionaryEntry>', '0', NULL, NULL, '1', 'D', NULL, NULL, NULL, '10', '21', '0', '0', '0', '0', '0', '0', '0')

insert @Setup values ('8.2.6.3874', 'Oct 30 2012 10:21AM', 'D614930D-162A-410C-A3B4-B013534D3C66', 'Enrich Version 8.2.6.3874 New: - Security roles have been updated to better support students who attend multiple schools. School administrators can now view students who attend classes at their school, but whose home school is a different school. - The security role definition page provides updated descriptions of each security zone.  - Security roles have been updated to better support multi-district environments and programs:    - Advanced search page limits users to see only students in their own district. This also affects student group creation which uses the advanced search tool.   - Program summary reports filter students based on users'' school or district security roles. - Several performance improvements to better support large districts with concurrent usage of programs. These changes should reduce the amount of memory and CPU utilized. Additional performance improvements are pending in an upcoming release. - Added API to allow 3rd party applications to provide direct, secure links to specific screens within Enrich.  - [IEP - Colorado] Added CO-specific accommodations and related questions on IEP. - [IEP] Added Staff ID field to user profile for use in state reports.   Fixed: - [Assess] MAP Fall 2012 import may have omitted Language scores if using Web based MAP and Common Core standards, because  scores are listed differently between the Combined Data File and the raw data file (used by original MAP).   If your district uses Web based MAP and Common Core goals, we recommend that you re-import your Fall 2012 MAP file to ensure that the Language scores are all included.  Specifically:   - "Writing: Plan, Organize, Develop, Revise, Research" will map to "Plan, Organize, Research" score   - "Language: Understand, Edit for Grammar, Usage" will map to "Understand, Grammar, Usage" score   - "Language: Understand, Edit Mechanics" will map to "Punctuate, Spell Correctly".    See the following for more information on Common Core Goal structure: http://www.nwea.org/support/article/common-core-map-and-map-primary-grades - Users could previously only add students if they were assigned a role with "Everything" zone specified. Now a school-level or district-level user can add students. (Note that the "Add student" functionality is generally applicable only for districts using Special Education.)   Known Issue: - In creation of custom assessment reports, multiple edits of criteria may cause error: "Index was out of range", or may result in most recently added filter prompts not appearing on "Run Report" page.   Work-around: Save the report before re-editing the criteria.  If you receive "Index was out of range" error you will need to recreate the report criteria. This will be corrected in an upcoming release.   Enrich Version 8.2.5.3856 New: - Updated the "Merge Duplicate Students" utility so that it will not allow merging of students who have overlapping programs data. This is to prevent corruption of data.  For example, if both students have a Special Education involvement with overlapping dates, the Merge utility will point out the conflict. User must then manually update one of the student records to alleviate the conflict prior to merging.  Note that if the records have RTI involvements in two different domains, this will not cause a conflict and the two student records can be merged.  Fixed: - Users can now upload attachments without being granted Administrative Edit permissions. - [Assess] TCAP (CO) import now uses State ID for both the import matching and combining multiple subject records into one. - [IEP] Matrix of Service (FL only) did not show all disabilities beyond the first two disabilities. - [IEP] Validation message on IEP planned End Date has been clarified to state "The planned end date cannot be greater than the default (the meeting date plus one year minus one day)."   Enrich Version 8.2.4.3850 New: - [General] Minor Performance change to all static pages. Fixed: - [Assess] Error: Missing value for the user parameter on the Performance Groups (One Score or Two Scores) report.   Enrich Version 8.2.4.3847 **This is an Assess Update Only** New - [Assess] Added Support for MAP Goals for Common Core Standards. * Note: If you have already imported Fall 2012 MAP scores and your district uses new Common Core goals, you will need to re-import your MAP file to ensure all scores are included.  If your district does not use Common Core goals, you do not need to re-import. - [SC Only] Updated Extended Properties for True Grade, Student Generation, and Instructional Setting. - [SC Only] Added English Proficiency to clients that currently do not have it available. - [IEP] Disabled the ability to edit meetings associated with finalized IEPs. Fixed - [IEP] Error when selecting Print on a student''s IEP. - [IEP] Error that causes user to be disconnected from concurrent user editing session by opening a document on an IEP. - [IC SIS Import] SIS Import failure based on SchoolID being null from the School Calendar table in Infinite Campus. - Error when value is not provided for filter in Reports. Known Issue: - Error when running Performance Groups reports: "This report requires a default or user-defined value for the report parameter ''user''". This error will be corrected in a subsequent release as soon as possible.', 'Nov  6 2012  5:11PM')

update t set ReleaseNotes = s.ReleaseNotes, InstallDate = s.InstallDate, InstallScheduleID = s.InstallScheduleID 
from Setup t join 
@setup s on t.VersionNumber = s.VersionNumber

rollback tran
commit tran



--Msg 547, Level 16, State 0, Line 14
--The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Setup#InstallSchedule#". The conflict occurred in database "RtI_Lancaster_Prod", table "VC3TaskScheduler.ScheduledTaskSchedule", column 'ID'.
--The statement has been terminated.

